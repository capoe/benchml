<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python API &mdash; BenchML 0.6.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="https://unpkg.com/mermaid@9.4.3/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="benchml package" href="api/benchml.html" />
    <link rel="prev" title="Development guide" href="dev.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            BenchML
              <img src="_static/bml.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.6.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="use.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Development guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core">Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#benchml.pipeline.Module"><code class="docutils literal notranslate"><span class="pre">Module</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#benchml.pipeline.Transform"><code class="docutils literal notranslate"><span class="pre">Transform</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#implementing-a-new-transform-class">Implementing a new transform class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#input-transforms">Input transforms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#map-transforms">Map transforms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fit-transforms">Fit transforms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#transform-class-attributes">Transform class attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-add-a-plugin">How to add a plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/benchml.html">Autogenerated API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BenchML</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Python API</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-benchml">
<span id="python-api"></span><h1>Python API<a class="headerlink" href="#module-benchml" title="Permalink to this heading"></a></h1>
<p>BenchML.</p>
<section id="core">
<h2>Core<a class="headerlink" href="#core" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="benchml.pipeline.Module">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">benchml.pipeline.</span></span><span class="sig-name descname"><span class="pre">Module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'module'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">broadcast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hyper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#benchml.pipeline.Module" title="Permalink to this definition"></a></dt>
<dd><p>A module encapsulates an ML pipeline. It consists of a sequence of
interdependent transforms.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em>) – Module name (optional)</p></li>
<li><p><strong>broadcast</strong> (<em>dict</em>) – Inputs to be broadcast to all nodes (optional)</p></li>
<li><p><strong>transforms</strong> (<em>list</em>) – List of BenchML transforms</p></li>
<li><p><strong>hyper</strong> (<em>object</em>) – Hyper-optimization controller</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="benchml.pipeline.Transform">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">benchml.pipeline.</span></span><span class="sig-name descname"><span class="pre">Transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#benchml.pipeline.Transform" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Transforms are the nodes of the pipeline: They act on the data stream via calls to their .map and/or .fit methods. The results are then stored in their private stream and/or parameter object. An example for the constructor call that creates a new transform instance reads as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">trafo</span> <span class="o">=</span> <span class="n">RandomProjector</span><span class="p">(</span>
  <span class="n">args</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;cutoff&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s2">&quot;epsilon&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="o">...</span><span class="p">},</span>
  <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;X&quot;</span><span class="p">:</span> <span class="s2">&quot;descriptor.x&quot;</span><span class="p">,</span>
    <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;input.y&quot;</span><span class="p">,</span>
    <span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="s2">&quot;predictor._model&quot;</span><span class="p">,</span>
    <span class="o">...</span><span class="p">})</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The “args” dictionary supplies the parameters of the transformation, such as a cutoff, a convergence threshold, etc. These parameters should not be confused with the <em>output</em> parameters (which could, e.g., include fit coefficients or trained models) stored in the params() object of a transform.</p></li>
<li><p>The “inputs” field contains links to the data stream of ancestral transforms on which the transformation acts. The address of the inputs is specified in the form &lt;transform_tag&gt;.&lt;data_tag&gt;. For example, “descriptor.x” points to the field “x” stored in the stream of the transform with name tag “descriptor”. If the tag is prefixed with an underscore “_” (such as in “predictor._model”), then the input is not read from the stream of the respective node, but its params object.</p></li>
</ul>
<section id="implementing-a-new-transform-class">
<h3>Implementing a new transform class<a class="headerlink" href="#implementing-a-new-transform-class" title="Permalink to this heading"></a></h3>
<p>There are three types of transforms: input, map, and fit+map transforms. Which type we are dealing with is determined by which methods (._feed, ._map, ._fit) a particular transform implements.</p>
<section id="input-transforms">
<h4>Input transforms<a class="headerlink" href="#input-transforms" title="Permalink to this heading"></a></h4>
<p>Input transforms, such as ExtXyzInput, implement the ._feed method that is called inside .open of a model (= pipeline):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stream</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># &lt; Internally this will call .feed on all</span>
                          <span class="c1">#   transforms that implement the ._feed method.</span>
</pre></div>
</div>
<p>Below we show an example implementation for an input node (here: ExtXyzInput), where .feed is used to release “configs”, “y” and “meta” into the data stream:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExtXyzInput</span><span class="p">(</span><span class="n">Transform</span><span class="p">):</span>                 <span class="c1"># &lt; All transforms derive from &lt;Transform&gt;</span>
    <span class="n">allow_stream</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;configs&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;meta&#39;</span><span class="p">}</span>   <span class="c1"># &lt; Fields permitted in the stream object</span>
    <span class="n">stream_copy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,)</span>                   <span class="c1"># &lt; See section on class attributes</span>
    <span class="n">stream_samples</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;configs&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>         <span class="c1"># &lt; See section on class attributes</span>
    <span class="k">def</span> <span class="nf">_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;configs&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">meta</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="map-transforms">
<h4>Map transforms<a class="headerlink" href="#map-transforms" title="Permalink to this heading"></a></h4>
<p>A map transform implements only ._map (but not ._fit). Most descriptors fall within this class of transforms, such as the RandomDescriptor class below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RandomDescriptor</span><span class="p">(</span><span class="n">Transform</span><span class="p">):</span>
    <span class="n">default_args</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;xmin&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span>
      <span class="s1">&#39;xmax&#39;</span><span class="p">:</span> <span class="o">+</span><span class="mf">1.</span><span class="p">,</span>
      <span class="s1">&#39;dim&#39;</span><span class="p">:</span> <span class="kc">None</span>
    <span class="p">}</span>
    <span class="n">req_args</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;dim&#39;</span><span class="p">,)</span>           <span class="c1"># &lt; Required fields to be specified in the constructor &quot;args&quot;</span>
    <span class="n">req_inputs</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;configs&#39;</span><span class="p">,)</span>     <span class="c1"># &lt; Required inputs to be specified in the constructor &quot;inputs&quot;</span>
    <span class="n">allow_stream</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;X&#39;</span><span class="p">}</span>
    <span class="n">stream_samples</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,)</span>
    <span class="n">precompute</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">def</span> <span class="nf">_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>       <span class="c1"># &lt; The inputs dictionary comes preloaded with the appropriate data</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span>
          <span class="nb">len</span><span class="p">(</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;configs&quot;</span><span class="p">]),</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;dim&quot;</span><span class="p">])</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;xmin&quot;</span><span class="p">],</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s2">&quot;xmax&quot;</span><span class="p">],</span>
          <span class="n">size</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span> <span class="c1"># &lt; The X matrix is stored in the active stream of the transform</span>
</pre></div>
</div>
</section>
<section id="fit-transforms">
<h4>Fit transforms<a class="headerlink" href="#fit-transforms" title="Permalink to this heading"></a></h4>
<p>Fit transforms implement ._fit and ._map: The former is called during the training stage within model.fit(stream). The fit stores its parameters in the transform.params() object, but may also access transform.stream(), e.g., to store predicted targets for the training set. The map operation reads model parameters from .params() (e.g. via self.params().get(“coeffs”)), and releases the mapped output into the stream. See below a wrapper around the Ridge predictor from sklearn:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Ridge</span><span class="p">(</span><span class="n">Transform</span><span class="p">):</span>
    <span class="n">default_args</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mf">1.</span> <span class="p">}</span>
    <span class="n">req_inputs</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>
    <span class="n">allow_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;model&#39;</span><span class="p">}</span>
    <span class="n">allow_stream</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;y&#39;</span><span class="p">}</span>
    <span class="k">def</span> <span class="nf">_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">linear_model</span><span class="o">.</span><span class="n">Ridge</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">])</span>
        <span class="n">yp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">])</span>
        <span class="n">params</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">yp</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">])</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="transform-class-attributes">
<h3>Transform class attributes<a class="headerlink" href="#transform-class-attributes" title="Permalink to this heading"></a></h3>
<p>New transform classes may require us to update their class attributes in order to define default arguments, required inputs, or ensure correct handling of their data streams. The base Transform class lists the following class attributes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Transform</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">default_args</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">req_args</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
    <span class="n">req_inputs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
    <span class="n">precompute</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">allow_stream</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">allow_params</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">stream_copy</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
    <span class="n">stream_samples</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
    <span class="n">stream_kernel</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
</pre></div>
</div>
<p>Computationally expensive transforms should typically set “precompute = True”, which will add them to the list of transforms mapped during a call to model.precompute(stream). This will precompute the output for a specific data stream, and then only recompute values if the version hash of the stream changes (e.g., due to an args update of an ancestral transform).</p>
<p>For hyperoptimization, as well as benchmarking purposes, the stream attached to a transform needs to know how to split its data into a train and test partition. Consider e.g.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stream</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">precompute</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
<span class="n">stream_train</span><span class="p">,</span> <span class="n">stream_test</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">train_fraction</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">stream_train</span><span class="p">)</span>
</pre></div>
</div>
<p>The stream_copy, stream_samples and stream_kernel attributes inform the stream how to adequately split its member data onto these partitions. For example, for ExtXyzInput, we have the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExtXyzInput</span><span class="p">(</span><span class="n">Transform</span><span class="p">):</span>
    <span class="n">allow_stream</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;configs&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;meta&#39;</span><span class="p">}</span>
    <span class="n">stream_copy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,)</span>
    <span class="n">stream_samples</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;configs&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will instruct the split operation to simply copy all the “meta” data to both stream_train and stream_test, whereas the “configs” and “y” data listed in stream_samples will be sliced (such as in configs_train = configs[trainset], configs_test = configs[testset]).</p>
<p>Finally, for a precomputed kernel object, this slicing operation differs qualitatively from slicing of, say, a design matrix, as this affects the two axes of the matrix in different way (e.g., K_train = K[trainset][:,trainset], where K_test = K[testset][:,trainset]. This is why the kernel matrix computed, e.g., by the KernelDot transform is listed in a dedicated stream_kernel attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">KernelDot</span><span class="p">(</span><span class="n">Transform</span><span class="p">):</span>
    <span class="n">default_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;power&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="n">req_inputs</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,)</span>
    <span class="n">allow_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;X&#39;</span><span class="p">}</span>
    <span class="n">allow_stream</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;K&#39;</span><span class="p">}</span>
    <span class="n">stream_kernel</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;K&#39;</span><span class="p">,)</span>
    <span class="n">precompute</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="how-to-add-a-plugin">
<h3>How to add a plugin<a class="headerlink" href="#how-to-add-a-plugin" title="Permalink to this heading"></a></h3>
<p>New transforms can be defined either externally or internally. In the latter case, add a source file with the implementation to the benchml/plugins folder, and subsequently import that file in benchml/plugins/__init__.py. You can check that your transforms were successfully added using bin/bmark.py:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./bin/bmark.py --list_transforms</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dev.html" class="btn btn-neutral float-left" title="Development guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api/benchml.html" class="btn btn-neutral float-right" title="benchml package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Carl Poelking.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>